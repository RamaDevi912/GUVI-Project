<!DOCTYPE html>
<html>

<head>
    <title>Craft Cart</title>
    <link rel="stylesheet" href="task.css" />
    <link rel="stylesheet" href="auth.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
        integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <div class="one1">
        <div class="one11">
            <div class="one111">
                <img src="logo.jpg" alt="" width="200" height="80">
            </div>
            <div class="one112">
                <div class="one2">
                    <a href="#home">Home</a>
                    <a href="#products">Products</a>
                    <a href="#reviews">Reviews</a>
                    <a href="#contact">Contact</a>
                </div>
                <div class="auth-section">
                    <button id="authButton" class="auth-button-nav">Login / Signup</button>
                    <i class="fa-solid fa-user-circle profile-icon" id="profileIcon" style="display: none;"></i>

                    <div id="loginModal" class="modal">
                        <div class="modal-content">
                            <span class="close" onclick="closeModal('login')">&times;</span>
                            <h2>Login</h2>
                            <form id="loginForm">
                                <label for="loginUsername">Email:</label>
                                <input type="email" id="loginUsername" placeholder="Email" required />
                                <label for="loginPassword">Password:</label>
                                <input type="password" id="loginPassword" placeholder="Password" required />
                                <button type="submit" class="modal-submit-button">Login</button>
                                <p id="loginError" class="error-message"
                                    style="color: red; display: none; margin-top: 10px;">Invalid email or password.</p>
                            </form>
                            <p class="switch-auth-mode">
                                Don't have an account?
                                <a href="#" onclick="openModal('signup'); closeModal('login');">Signup</a>
                            </p>
                        </div>
                    </div>

                    <div id="signupModal" class="modal">
                        <div class="modal-content">
                            <span class="close" onclick="closeModal('signup')">&times;</span>
                            <h2>Signup</h2>
                            <form id="signupForm">
                                <label for="signupFullname">Full Name:</label>
                                <input type="text" id="signupFullname" placeholder="Full Name" required />
                                <label for="signupEmail">Email:</label>
                                <input type="email" id="signupEmail" placeholder="Email" required />
                                <label for="signupPassword">Password:</label>
                                <input type="password" id="signupPassword" placeholder="Password" required />
                                <button type="submit" class="modal-submit-button">Signup</button>
                            </form>
                            <p class="switch-auth-mode">
                                Already have an account?
                                <a href="#" onclick="openModal('login'); closeModal('signup');">Login</a>
                            </p>
                        </div>
                    </div>

                    <div id="profilePopup" class="profile-popup">
  <h3>Welcome, <span id="profileName"></span>!</h3>
  <hr>
  <p>Have a Nice Day üòä</p>
<hr>
  <div class="profile-links">
    <a href="./InnerPages/Details/favpage.html" class="profile-link">‚ù§Ô∏è My Favorites</a>
    <hr>
    <a href="./InnerPages/Details/cartpage.html" class="profile-link">üõí My Cart</a>
  </div>
  <hr>

  <button id="logoutBtn" onclick="logout()">Logout</button>
</div>

                </div>
            </div>
        </div>
    </div>
    <div class="onememu">
        <a href="#home" class="onemenu1">Home</a>
        <a href="#products" class="onemenu1">Products</a>
        <a href="#reviews" class="onemenu1">Reviews</a>
        <a href="#contact" class="onemenu1">Contact</a>
        <div class="onemenu1" onclick="oneclose1()" style="cursor: pointer;">CLOSE</div>
    </div>

    <div class="secondPart" id="home">
        <div class="secondone">
            <div class="secondone1">
                <div class="headd">Welcome to CraftCart</div>
                <div class="head1">Where Tradition Meets Timeless Art</div>
                <div class="head2">Discover the soul of craftsmanship at CraftCard, your one-stop destination for
                    exquisite antiques, hand-carved sculptures, handlooms, wooden artifacts, and more. Each piece in our
                    collection tells a story ‚Äî rooted in culture, crafted with passion, and designed to bring elegance
                    to your space. Whether you're a connoisseur of heritage or simply looking for a touch of tradition,
                    CraftCard brings the finest artisanal treasures from skilled hands to your home.</div>
            </div>
        </div>
        <div class="secondimg">
            <img src="secondd.png" alt="">
        </div>
    </div>
    <div id="products">
        <h1>Products</h1>
        <div style="display: flex; justify-content: space-between; align-items: center; width: 100%;">
            <div class="search"></div>
            <div class="search-container" style="margin-right: 10%;">
                <input type="text" id="searchInput" placeholder="Search artifacts...">
            </div>
        </div>
        <div class="productt">
            <div class="product-grid" id="productGrid"></div>
        </div>
    </div>

    <div class="recomsPart" id="reviews">
        <h1>Reviews</h1>
        <p class="recompara">Our Latest customer reviews </p>

        <div class="carouselWrapper">
            <div class="carouselSlides">
                <div class="recomcard">
                    <div style="color: #FFB400;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <div class="recomHead">True to Tradition!</div>
                    <div class="recompara">From the materials to the design, everything speaks of care and cultural
                        respect. I‚Äôm deeply satisfied with both the product and the quick shipping.</div>
                    <div class="recomcon">
                        <img src="https://images.rawpixel.com/image_png_800/cHJpdmF0ZS9sci9pbWFnZXMvd2Vic2l0ZS8yMDIyLTA3L2pvYjEwNjAtMTQucG5n.png"
                            alt="dp" width="60" height="70" class="circleimg" />
                        <div>
                            <div> Rishi Jain,</div>
                            <div> Craft Enthusiast</div>
                        </div>
                    </div>
                </div>


                <div class="recomcard">
                    <div style="color: #FFB400;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <div class="recomHead">Cultural Treasure!</div>
                    <div class="recompara">The handmade textile tells a story of tradition and elegance. It brings
                        warmth and heritage into our space. Efficient delivery and top-notch quality.

                    </div>
                    <div class="recomcon">
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQqkUYrITWyI8OhPNDHoCDUjGjhg8w10_HRqg&s"
                            alt="dp" width="60" height="70" class="circleimg" />
                        <div>
                            <div>Kavya Rao,</div>
                            <div>Museum Curator</div>
                        </div>
                    </div>
                </div>


                <div class="recomcard">
                    <div style="color: #FFB400;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <div class="recomHead">Beautifully Handcrafted!</div>
                    <div class="recompara">The clay sculpture I received feels soulful and timeless. Truly honored to
                        display it in my home. Kudos to the artisans and the seamless delivery experience.

                    </div>
                    <div class="recomcon">
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ4EAO3lxb-uoyP2-ig5Ja68nh_BiS3oqYP8A&s"
                            alt="dp" width="60" height="70" class="circleimg" />
                        <div>
                            <div>Arun Mehta,</div>
                            <div>Interior Designer</div>
                        </div>
                    </div>
                </div>


                <div class="recomcard">
                    <div style="color: #FFB400;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <div class="recomHead">Exquisite Craftsmanship!</div>
                    <div class="recompara">I am extremely impressed with the authenticity and detailing of the artifact.
                        It‚Äôs like holding a piece of history! Fast delivery and well-packaged.

                    </div>
                    <div class="recomcon">
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT-VTkvvi3P4QQVG2Rn87BBKVbNlwslj2bQew&s"
                            alt="dp" width="60" height="70" class="circleimg" />
                        <div>
                            <div>Priya Sen,</div>
                            <div> Historian</div>
                        </div>
                    </div>
                </div>


                <div class="recomcard">
                    <div style="color: #FFB400;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <div class="recomHead">Timeless Beauty!</div>
                    <div class="recompara">I was awestruck by the handwoven basket‚Äîit feels like a whisper from the
                        past. Each detail speaks volumes about tradition. Delivered with care and precision.

                    </div>
                    <div class="recomcon">
                        <img src="https://www.kindpng.com/picc/m/497-4973038_profile-picture-circle-png-transparent-png.png"
                            alt="dp" width="60" height="70" class="circleimg" />
                        <div>
                            <div>Sanya Iyer,</div>
                            <div>Lifestyle Blogger</div>
                        </div>
                    </div>
                </div>


                <div class="recomcard">
                    <div style="color: #FFB400;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <div class="recomHead">Magical Detailing!</div>
                    <div class="recompara">The brass incense holder is a masterpiece. It carries the aura of rituals
                        long forgotten. Packaging and delivery were spot-on.

                    </div>
                    <div class="recomcon">
                        <img src="joshdp.jpg" alt="dp" width="50" />
                        <div>
                            <div>Mohit Deshmukh,</div>
                            <div>Art Collector</div>
                        </div>
                    </div>
                </div>


                <div class="recomcard">
                    <div style="color: #FFB400;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <div class="recomHead">Woven Stories!</div>
                    <div class="recompara">The handmade rug feels like it carries generations of artistry. Superb finish
                        and vibrant colors. Arrived quicker than I expected.

                    </div>
                    <div class="recomcon">
                        <img src="joshdp.jpg" alt="dp" width="50" />
                        <div>
                            <div> Tanya Bhagat,</div>
                            <div>Textile Designer</div>
                        </div>
                    </div>
                </div>


                <div class="recomcard">
                    <div style="color: #FFB400;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <div class="recomHead">Great Quality!</div>
                    <div class="recompara">Amazing collaboration, loved the attention to detail!</div>
                    <div class="recomcon">
                        <img src="joshdp.jpg" alt="dp" width="50" />
                        <div>
                            <div>James Gouse</div>
                            <div>Graphic Designer</div>
                        </div>
                    </div>
                </div>


                <div class="recomcard">
                    <div style="color: #FFB400;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <div class="recomHead">Woven Stories!</div>
                    <div class="recompara">The handmade rug feels like it carries generations of artistry. Superb finish
                        and vibrant colors. Arrived quicker than I expected.

                    </div>
                    <div class="recomcon">
                        <img src="joshdp.jpg" alt="dp" width="50" />
                        <div>
                            <div> Tanya Bhagat,</div>
                            <div>Textile Designer</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="carouselDots"></div>
        </div>
    </div>


    <div class="contact" id="contact">
<div class="leftPart">
            <h1>Leave ME Your info</h1>
            <form id="contactForm" class="leftbox">
                <label>Your Full Name (Required)</label>
                <input type="text" id="name" class="inputt" required>

                <label>Your Email (Required)</label>
                <input type="email" id="email" class="inputt" required>

                <label>Subject</label>
                <input type="text" id="subject" class="inputt">

                <label>Your Message</label>
                <textarea id="message" class="inputt" style="height: 150px;"></textarea>

                <button type="submit" class="buttonsend">Send Message</button>
            </form>
        </div>
        <div class="rightpart">
            <h1>Contact information</h1>
            <div class="rightbox">

                <div class="rightcard">
                    <div class="circleout">
                        <div class="circle"><i class="fa-solid fa-square-envelope"></i></div>
                    </div>
                    <div class="carddata">
                        <div>
                            <div>Name:</div>
                            <div>City:</div>
                            <div>Cell:</div>
                        </div>
                        <div>
                            <div>AUS</div>
                            <div>Surampalem</div>
                            <div>9955887744</div>
                        </div>
                    </div>
                </div>

                <div class="rightcard">
                    <div class="circleout">
                        <div class="circle"><i class="fa-solid fa-square-envelope"></i></div>
                    </div>
                    <div class="carddata">
                        <div>
                            <div>Name:</div>
                            <div>City:</div>
                            <div>Cell:</div>
                        </div>
                        <div>
                            <div>ACET</div>
                            <div>Surampalem</div>
                            <div>9966332211</div>
                        </div>
                    </div>
                </div>

                <div class="rightcard">
                    <div class="circleout">
                        <div class="circle"><i class="fa-solid fa-square-envelope"></i></div>
                    </div>
                    <div class="carddata">
                        <div>
                            <div>Name:</div>
                            <div>City:</div>
                            <div>Cell:</div>
                        </div>
                        <div>
                            <div>ACES</div>
                            <div>Surampalem</div>
                            <div>9988774411</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="lastPart">
        <div class="lastPart1">
            <div class="lastmiddle">

                <div class="last1">
                    <img src="logo.jpg" alt="" width="180px" height="80px">
                </div>
                <div class="last2">
                    <div class="headp">Quick Links</div>
                    <div>Home</div>
                    <div>Header</div>
                    <div>Poducts</div>
                    <div>Reviews</div>
                    <div>Contact</div>
                </div>

                <div class="last2">
                    <div class="headp">Website</div>
                    <div>Home Decor</div>
                    <div>Sclpture</div>
                    <div>Wood Craft</div>
                    <div>Painting</div>
                    <div>Tribal Art</div>
                    <div>HandLoom</div>
                </div>

                <div class="last4">
                    <div class="headp">Connect</div>
                    <div
                        style="color: #0077B5; font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;">
                        Linkedin <i class="fa-brands fa-linkedin"></i></div>
                    <div style="font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;"><i
                            class="fa-brands fa-square-instagram" style="color:#d62976;"></i> Instagram</div>
                    <div style="color: #1877F2;"><i class="fa-brands fa-square-facebook"></i> Facebook</div>
                </div>

            </div>

            <div style="display: flex;align-items: center; justify-content: center;">
                <div>¬© 2025 CopyRight, All Rights Reserved</div>
            </div>
        </div>
    </div>

    <script> 
        const slides = document.querySelector('.carouselSlides');
        const cards = document.querySelectorAll('.recomcard');
        const dotsContainer = document.querySelector('.carouselDots');
        let currentIndex = 0;

        function getVisibleCount() {
            if (window.innerWidth <= 480) return 1;
            if (window.innerWidth <= 768) return 2;
            return 3;
        }

        function showSlide(index) {
            const cardWidth = cards[0].offsetWidth + 20;
            const visibleCount = getVisibleCount();
            slides.style.transform = `translateX(-${index * cardWidth}px)`;
            updateDots(index, visibleCount);
        }

        function updateDots(index, visibleCount) {
            dotsContainer.innerHTML = '';
            const totalSlides = Math.ceil(cards.length / visibleCount);
            for (let i = 0; i < totalSlides; i++) {
                const dot = document.createElement('span');
                dot.className = i === index ? 'active' : '';
                dot.addEventListener('click', () => {
                    currentIndex = i;
                    showSlide(currentIndex);
                });
                dotsContainer.appendChild(dot);
            }
        }

        window.addEventListener('resize', () => {
            showSlide(currentIndex);
        });

        showSlide(currentIndex);

       
       
        const grid = document.getElementById("productGrid");
    const searchInput = document.getElementById("searchInput");

    async function fetchProducts() {
        try {
            const response = await fetch("http://localhost:5000/api/products/");

            console.log("Response status:", response.status);

            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }

            const products = await response.json();
            console.log("Fetched products:", products);

            renderProducts(products);

             searchInput.addEventListener("input", () => {
                const query = searchInput.value.toLowerCase();
                const filtered = products.filter(product =>
                    product.title.toLowerCase().includes(query)
                );

                renderProducts(filtered);
            });

        } catch (error) {
            console.error("Error fetching products:", error);
        }
    }

    function renderProducts(data) {
        grid.innerHTML = "";  

        if (data.length === 0) {
            grid.innerHTML = `<p>No products found.</p>`;
            return;
        }

        data.forEach(item => {
            const card = document.createElement("div");
            card.className = "card";
            card.setAttribute("data-title", item.title.toLowerCase());

            card.onclick = () => {
                if (item.link) {
                    window.location.href = item.link;
                } else {
                    alert("No link available for this product.");
                }
            };

            card.innerHTML = `
                <img src="${item.imageUrl}" alt="${item.title}" onerror="this.src='fallback.jpg';" />
                <div class="card-content">
                    <div class="card-title">${item.title}</div>
                    <div class="card-desc">${item.description}</div>
                </div>
            `;
            grid.appendChild(card);
        });
    }

     fetchProducts();
   


        // --------------------------------

   let currentUser = null;

  function openModal(id) {
    document.getElementById(`${id}Modal`).style.display = "block";
  }

  function closeModal(id) {
    document.getElementById(`${id}Modal`).style.display = "none";
  }

  function updateUI() {
    const loginBtn = document.getElementById('authButton');
    const profileBtn = document.getElementById('profileIcon');
    const profileName = document.getElementById('profileName');

    if (currentUser) {
      loginBtn.style.display = 'none';
      profileBtn.style.display = 'inline-block';
      if (profileName) profileName.textContent = currentUser.name;
    } else {
      loginBtn.style.display = 'inline-block';
      profileBtn.style.display = 'none';
    }
  }

  function loadUserFromLocalStorage() {
    const storedUser = localStorage.getItem('loggedInUser');
    if (storedUser) {
      const user = JSON.parse(storedUser);
      loadUserProfile(user.email);
    }
  }

  async function loadUserProfile(email) {
    try {
      const res = await fetch(`http://localhost:5000/api/users/profile/${email}`);
      const data = await res.json();
      if (res.ok) {
        currentUser = { name: data.name, email: data.email };
        localStorage.setItem('loggedInUser', JSON.stringify(currentUser));
        updateUI();
      }
    } catch (err) {
      console.error('Failed to load profile', err);
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
     const loginForm = document.getElementById('loginForm');
    if (loginForm) {
      loginForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.getElementById('loginUsername').value;
        const password = document.getElementById('loginPassword').value;

        try {
          const res = await fetch('http://localhost:5000/api/users/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email, password })
          });
          const user = await res.json();

          if (res.ok) {
            currentUser = { name: user.name, email: user.email };
            localStorage.setItem('loggedInUser', JSON.stringify(currentUser));
            closeModal('login');
            updateUI();
          } else {
            document.getElementById('loginError').style.display = 'block';
          }
        } catch (error) {
          alert('Login failed. Server error.');
        }
      });
    }

     const signupForm = document.getElementById('signupForm');
    if (signupForm) {
      signupForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const name = document.getElementById('signupFullname').value;
        const email = document.getElementById('signupEmail').value;
        const password = document.getElementById('signupPassword').value;

        try {
          const res = await fetch('http://localhost:5000/api/users/signup', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ name, email, password })
          });
          const data = await res.json();

          if (res.ok) {
            alert('Signup successful!');
            currentUser = { name, email };
            localStorage.setItem('loggedInUser', JSON.stringify(currentUser));
            closeModal('signup');
            updateUI();
          } else {
            alert(data.message || 'Signup failed');
          }
        } catch (error) {
          alert('Server error during signup');
        }
      });
    }

     const profileIcon = document.getElementById('profileIcon');
    if (profileIcon) {
      profileIcon.addEventListener('click', () => {
        const popup = document.getElementById('profilePopup');
        if (popup) {
          popup.style.display = popup.style.display === 'block' ? 'none' : 'block';
        }
      });
    }

     const profilePopup = document.getElementById('profilePopup');
    if (profilePopup) {
      const logoutBtn = profilePopup.querySelector('button');
      if (logoutBtn) {
        logoutBtn.addEventListener('click', () => {
          localStorage.removeItem('loggedInUser');
          currentUser = null;
          updateUI();
        });
      }
    }

     window.onclick = function (event) {
      if (event.target.classList.contains('modal')) {
        event.target.style.display = "none";
      }
    };
document.getElementById('authButton').addEventListener('click', () => {
    openModal('login');
});


     loadUserFromLocalStorage();
  });
 window.onload = () => {
  loadUserFromLocalStorage();

  const logoutBtn = document.getElementById("logoutBtn");
  if (logoutBtn) {
    logoutBtn.addEventListener("click", logout);
  }
};
  function logout() {
     localStorage.removeItem('loggedInUser');
    currentUser = null;
    updateUI();
    const profilePopup = document.getElementById("profilePopup");
    if (profilePopup) {
      profilePopup.style.display = "none";
    }
  }
  //-----------------------------CONTACT FORM SCRIPT------------------------------------------ 
        function showToast(message, type = "success") {
            const toast = document.getElementById("toast");
            toast.textContent = message;

             toast.classList.remove("toast-success", "toast-error");

             if (type === "success") {
                toast.classList.add("toast-success");
            } else {
                toast.classList.add("toast-error");
            }

             toast.classList.add("show");

            setTimeout(() => {
                toast.classList.remove("show");
            }, 3000);
        }

        document.querySelector(".buttonsend").addEventListener("click", async (e) => {
            e.preventDefault();

            const name = document.getElementById("name").value;
            const email = document.getElementById("email").value;
            const subject = document.getElementById("subject").value;
            const message = document.getElementById("message").value;

            const data = { name, email, subject, message };

            try {
                const res = await fetch("http://localhost:5000/api/contact", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(data)
                });

                if (res.ok) {
                    showToast("Message sent successfully ‚úÖ", "success");
                     document.getElementById("name").value = "";
                    document.getElementById("email").value = "";
                    document.getElementById("subject").value = "";
                    document.getElementById("message").value = "";
                } else {
                    showToast("Something went wrong ‚ùå", "error");
                }
            } catch (err) {
                console.error(err);
                showToast("Error while sending ‚ùå", "error");
            }
        });
//----------------------------end of contact form script-----------------------------------------------
</script>
<div id="toast" class="toast">Message sent successfully ‚úÖ</div>
</body>

</html>